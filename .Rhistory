x = 20,
y = 3.5,
hjust = 0,
vjust = 0,
color = "blue",
size = 6
) +
labs(
x = "Time (h)"
) +
theme_classic2() +
scale_x_continuous(breaks = seq(0, 48, 1)) +
coord_cartesian(xlim = c(20, 30)) +
theme(
axis.title.y = element_blank(),
axis.title.x = element_text(size = 20),
axis.text = element_text(size = 16)
)
ggplot(df_2, aes(Time)) +
geom_line(aes(y = Slope), color = "blue", size = 1.2) +
geom_line(aes(y = Raw - 1), color = "red", size = 1.2) +
# geom_smooth(aes(y = Slope), color = "blue", span = 0.1, se = F, size = 1.2) +
# geom_smooth(aes(y = Raw - 1), color = "red", span = 0.1, se = F, size = 1.2) +
geom_hline(yintercept = ms, color = "darkblue", size = 1.2, linetype = "dashed") +
# geom_vline(xintercept = ms_time, color = "darkblue", size = 1.2, linetype = "dashed") +
geom_hline(yintercept = mpr - 1, color = "darkred", size = 1.2, linetype = "dashed") +
# geom_vline(xintercept = mpr_time, color = "darkred", size = 1.2, linetype = "dashed") +
geom_hline(yintercept = threshold - 1, color = "black", size = 1.2, linetype = "dashed") +
geom_vline(xintercept = ttt, color = "darkgreen", size = 1.2, linetype = "dashed") +
geom_label_repel(
label = "Maxpoint Ratio",
hjust = "inward",
x = mpr_time,
vjust = "outward",
y = mpr - 1,
data = subset(df_2, Raw == mpr),
force_pull = -200,
color = "darkred",
size = 6,
segment.size = 1.2
) +
geom_label_repel(
label = "Max Slope",
hjust = "inward",
x = ms_time,
vjust = "outward",
y = ms,
data = subset(df_2, Slope == ms),
force_pull = -200,
color = "darkblue",
size = 6,
segment.size = 1.2
) +
geom_label_repel(
label = "Threshold",
x = 20,
vjust = "outward",
y = threshold - 1,
data = subset(df_2, Time == 20.25),
force_pull = -10,
color = "black",
size = 6,
segment.size = 1.5
) +
geom_label_repel(
label = "Time-to-threshold",
hjust = "inward",
x = ttt,
vjust = "outward",
y = threshold - 1,
data = subset(df_2, Time == ttt),
force_pull = -300,
color = "darkgreen",
size = 6,
segment.size = 1.2
) +
geom_text(
label = "-- Normalized RFU",
x = 20,
y = 4,
hjust = 0,
vjust = 0,
color = "red",
size = 6
) +
geom_text(
label = "-- Derivative",
x = 20,
y = 3.5,
hjust = 0,
vjust = 0,
color = "blue",
size = 6
) +
labs(
x = "Time (h)"
) +
theme_classic2() +
scale_x_continuous(breaks = seq(0, 48, 1)) +
coord_cartesian(xlim = c(15, 35)) +
theme(
axis.title.y = element_blank(),
axis.title.x = element_text(size = 20),
axis.text = element_text(size = 16)
)
ggplot(df_2, aes(Time)) +
geom_line(aes(y = Slope), color = "blue", size = 1.2) +
geom_line(aes(y = Raw - 1), color = "red", size = 1.2) +
# geom_smooth(aes(y = Slope), color = "blue", span = 0.1, se = F, size = 1.2) +
# geom_smooth(aes(y = Raw - 1), color = "red", span = 0.1, se = F, size = 1.2) +
geom_hline(yintercept = ms, color = "darkblue", size = 1.2, linetype = "dashed") +
# geom_vline(xintercept = ms_time, color = "darkblue", size = 1.2, linetype = "dashed") +
geom_hline(yintercept = mpr - 1, color = "darkred", size = 1.2, linetype = "dashed") +
# geom_vline(xintercept = mpr_time, color = "darkred", size = 1.2, linetype = "dashed") +
geom_hline(yintercept = threshold - 1, color = "black", size = 1.2, linetype = "dashed") +
geom_vline(xintercept = ttt, color = "darkgreen", size = 1.2, linetype = "dashed") +
geom_label_repel(
label = "Maxpoint Ratio",
hjust = "inward",
x = mpr_time,
vjust = "outward",
y = mpr - 1,
data = subset(df_2, Raw == mpr),
force_pull = -200,
color = "darkred",
size = 6,
segment.size = 1.2
) +
geom_label_repel(
label = "Max Slope",
hjust = "inward",
x = ms_time,
vjust = "outward",
y = ms,
data = subset(df_2, Slope == ms),
force_pull = -200,
color = "darkblue",
size = 6,
segment.size = 1.2
) +
geom_label_repel(
label = "Threshold",
x = 20,
vjust = "outward",
y = threshold - 1,
data = subset(df_2, Time == 20.25),
force_pull = -10,
color = "black",
size = 6,
segment.size = 1.5
) +
geom_label_repel(
label = "Time-to-threshold",
hjust = "inward",
x = ttt,
vjust = "outward",
y = threshold - 1,
data = subset(df_2, Time == ttt),
force_pull = -300,
color = "darkgreen",
size = 6,
segment.size = 1.2
) +
geom_text(
label = "-- Normalized RFU",
x = 20,
y = 4,
hjust = 0,
vjust = 0,
color = "red",
size = 6
) +
geom_text(
label = "-- Derivative",
x = 20,
y = 3.5,
hjust = 0,
vjust = 0,
color = "blue",
size = 6
) +
labs(
x = "Time (h)"
) +
theme_classic2() +
scale_x_continuous(breaks = seq(0, 48, 2)) +
coord_cartesian(xlim = c(15, 35)) +
theme(
axis.title.y = element_blank(),
axis.title.x = element_text(size = 20),
axis.text = element_text(size = 16)
)
ggsave("images/metric_example.png", width = 12, height = 8)
ggplot(df_2, aes(Time)) +
geom_line(aes(y = Slope), color = "blue", size = 1.2) +
geom_line(aes(y = Raw - 1), color = "red", size = 1.2) +
# geom_smooth(aes(y = Slope), color = "blue", span = 0.1, se = F, size = 1.2) +
# geom_smooth(aes(y = Raw - 1), color = "red", span = 0.1, se = F, size = 1.2) +
geom_hline(yintercept = ms, color = "darkblue", size = 1.2, linetype = "dashed") +
# geom_vline(xintercept = ms_time, color = "darkblue", size = 1.2, linetype = "dashed") +
geom_hline(yintercept = mpr - 1, color = "darkred", size = 1.2, linetype = "dashed") +
# geom_vline(xintercept = mpr_time, color = "darkred", size = 1.2, linetype = "dashed") +
geom_hline(yintercept = threshold - 1, color = "black", size = 1.2, linetype = "dashed") +
geom_vline(xintercept = ttt, color = "darkgreen", size = 1.2, linetype = "dashed") +
geom_label_repel(
label = "Maxpoint Ratio",
hjust = "inward",
x = mpr_time,
vjust = "outward",
y = mpr - 1,
data = subset(df_2, Raw == mpr),
force_pull = -200,
color = "darkred",
size = 6,
segment.size = 1.2
) +
geom_label_repel(
label = "Max Slope",
hjust = "inward",
x = ms_time,
vjust = "outward",
y = ms,
data = subset(df_2, Slope == ms),
force_pull = -200,
color = "darkblue",
size = 6,
segment.size = 1.2
) +
geom_label_repel(
label = "Threshold",
x = 20,
vjust = "outward",
y = threshold - 1,
data = subset(df_2, Time == 20.25),
force_pull = -10,
color = "black",
size = 6,
segment.size = 1.5
) +
geom_label_repel(
label = "Time-to-threshold",
hjust = "inward",
x = ttt,
vjust = "outward",
y = threshold - 1,
data = subset(df_2, Time == ttt),
force_pull = -300,
color = "darkgreen",
size = 6,
segment.size = 1.2
) +
geom_text(
label = "-- Normalized RFU",
x = 15,
y = 4,
hjust = 0,
vjust = 0,
color = "red",
size = 6
) +
geom_text(
label = "-- Derivative",
x = 15,
y = 3.5,
hjust = 0,
vjust = 0,
color = "blue",
size = 6
) +
labs(
x = "Time (h)"
) +
theme_classic2() +
scale_x_continuous(breaks = seq(0, 48, 2)) +
coord_cartesian(xlim = c(15, 35)) +
theme(
axis.title.y = element_blank(),
axis.title.x = element_text(size = 20),
axis.text = element_text(size = 16)
)
ggsave("images/metric_example.png", width = 12, height = 8)
ggplot(df_2, aes(Time)) +
geom_line(aes(y = Slope), color = "blue", size = 1.2) +
geom_line(aes(y = Raw - 1), color = "red", size = 1.2) +
# geom_smooth(aes(y = Slope), color = "blue", span = 0.1, se = F, size = 1.2) +
# geom_smooth(aes(y = Raw - 1), color = "red", span = 0.1, se = F, size = 1.2) +
geom_hline(yintercept = ms, color = "darkblue", size = 1.2, linetype = "dashed") +
# geom_vline(xintercept = ms_time, color = "darkblue", size = 1.2, linetype = "dashed") +
geom_hline(yintercept = mpr - 1, color = "darkred", size = 1.2, linetype = "dashed") +
# geom_vline(xintercept = mpr_time, color = "darkred", size = 1.2, linetype = "dashed") +
geom_hline(yintercept = threshold - 1, color = "black", size = 1.2, linetype = "dashed") +
geom_vline(xintercept = ttt, color = "darkgreen", size = 1.2, linetype = "dashed") +
geom_label_repel(
label = "Maxpoint Ratio",
hjust = "inward",
x = mpr_time,
vjust = "outward",
y = mpr - 1,
data = subset(df_2, Raw == mpr),
force_pull = -200,
color = "darkred",
size = 6,
segment.size = 1.2
) +
geom_label_repel(
label = "Max Slope",
hjust = "inward",
x = ms_time,
vjust = "outward",
y = ms,
data = subset(df_2, Slope == ms),
force_pull = -200,
color = "darkblue",
size = 6,
segment.size = 1.2
) +
geom_label_repel(
label = "Threshold",
x = 15,
vjust = "outward",
y = threshold - 1,
data = subset(df_2, Time == 20.25),
force_pull = -10,
color = "black",
size = 6,
segment.size = 1.5
) +
geom_label_repel(
label = "Time-to-threshold",
hjust = "inward",
x = ttt,
vjust = "outward",
y = threshold - 1,
data = subset(df_2, Time == ttt),
force_pull = -300,
color = "darkgreen",
size = 6,
segment.size = 1.2
) +
geom_text(
label = "-- Normalized RFU",
x = 15,
y = 4,
hjust = 0,
vjust = 0,
color = "red",
size = 6
) +
geom_text(
label = "-- Derivative",
x = 15,
y = 3.5,
hjust = 0,
vjust = 0,
color = "blue",
size = 6
) +
labs(
x = "Time (h)"
) +
theme_classic2() +
scale_x_continuous(breaks = seq(0, 48, 2)) +
coord_cartesian(xlim = c(15, 35)) +
theme(
axis.title.y = element_blank(),
axis.title.x = element_text(size = 20),
axis.text = element_text(size = 16)
)
ggplot(df_2, aes(Time)) +
geom_line(aes(y = Slope), color = "blue", size = 1.2) +
geom_line(aes(y = Raw - 1), color = "red", size = 1.2) +
# geom_smooth(aes(y = Slope), color = "blue", span = 0.1, se = F, size = 1.2) +
# geom_smooth(aes(y = Raw - 1), color = "red", span = 0.1, se = F, size = 1.2) +
geom_hline(yintercept = ms, color = "darkblue", size = 1.2, linetype = "dashed") +
# geom_vline(xintercept = ms_time, color = "darkblue", size = 1.2, linetype = "dashed") +
geom_hline(yintercept = mpr - 1, color = "darkred", size = 1.2, linetype = "dashed") +
# geom_vline(xintercept = mpr_time, color = "darkred", size = 1.2, linetype = "dashed") +
geom_hline(yintercept = threshold - 1, color = "black", size = 1.2, linetype = "dashed") +
geom_vline(xintercept = ttt, color = "darkgreen", size = 1.2, linetype = "dashed") +
geom_label_repel(
label = "Maxpoint Ratio",
hjust = "inward",
x = mpr_time,
vjust = "outward",
y = mpr - 1,
data = subset(df_2, Raw == mpr),
force_pull = -200,
color = "darkred",
size = 6,
segment.size = 1.2
) +
geom_label_repel(
label = "Max Slope",
hjust = "inward",
x = ms_time,
vjust = "outward",
y = ms,
data = subset(df_2, Slope == ms),
force_pull = -200,
color = "darkblue",
size = 6,
segment.size = 1.2
) +
geom_label_repel(
label = "Threshold",
x = 15,
vjust = "outward",
y = threshold - 1,
data = subset(df_2, Time == 20.25),
force_pull = -100,
color = "black",
size = 6,
segment.size = 1.5
) +
geom_label_repel(
label = "Time-to-threshold",
hjust = "inward",
x = ttt,
vjust = "outward",
y = threshold - 1,
data = subset(df_2, Time == ttt),
force_pull = -300,
color = "darkgreen",
size = 6,
segment.size = 1.2
) +
geom_text(
label = "-- Normalized RFU",
x = 15,
y = 4,
hjust = 0,
vjust = 0,
color = "red",
size = 6
) +
geom_text(
label = "-- Derivative",
x = 15,
y = 3.5,
hjust = 0,
vjust = 0,
color = "blue",
size = 6
) +
labs(
x = "Time (h)"
) +
theme_classic2() +
scale_x_continuous(breaks = seq(0, 48, 2)) +
coord_cartesian(xlim = c(15, 35)) +
theme(
axis.title.y = element_blank(),
axis.title.x = element_text(size = 20),
axis.text = element_text(size = 16)
)
ggsave("images/metric_example.png", width = 12, height = 8)
library(quicR)
library(dplyr)
library(kableExtra)
library(readxl)
library(readr)
library(ggplot2)
library(reshape2)
file <- "../../inst/extdata/input_files/test2.xlsx"
file_384 <- "../../inst/extdata/input_files/test384.xlsx"
sample_file <- "../../inst/extdata/BMG_formatting/plate_layout.csv"
path <- "../../inst/extdata/BMG_formatting"
read_xlsx(file)[1:20, ] %>%
kable()
library(tidyr)
read_xlsx(file)[1:20, ] %>%
replace_na(" ") %>%
kable()
read_xlsx(file)[1:20, ] %>%
replace_na(" ") %>%
kable()
read_xlsx(file)[1:20, ] %>%
as.data.frame() %>%
replace_na(" ") %>%
kable()
read_xlsx(file)[1:20, ] %>%
mutate_all(~ replace_na(., " ")) %>%
kable()
?replace_na
read_xlsx(file)[1:20, ] %>%
mutate_all(~replace_na(., 0))
read_xlsx(file)[1:20, ] %>%
mutate_all(~replace_na(., ""))
read_xlsx(file)[1:20, ] %>%
mutate_all(~replace_na(., FALSE))
read_xlsx(file)[1:20, ] %>%
replace(is.na(.), 0)
read_xlsx(file)[1:20, ] %>%
replace(~is.na(.), 0)
read_xlsx(file)[1:20, ] %>%
as.data.frame() %>%
replace(~is.na(.), 0)
read_xlsx(file)[1:20, ] %>%
as.data.frame() %>%
replace(is.na(.), 0)
read_xlsx(file)[1:20, ] %>%
as.data.frame() %>%
replace(is.na(.), "")
read_xlsx(file)[1:20, ] %>%
as.data.frame() %>%
replace(is.na(.), "") %>%
kable()
read_xlsx(file)[1:20, ] %>%
as.data.frame() %>%
replace(is.na(.), "") %>%
mutate_at(1, ~gsub("\\\\", "/", .)) %>%
kable()
